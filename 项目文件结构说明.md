# 图书管理系统 - 项目文件结构说明

## 项目概述

本项目是一个基于Qt6.9.3框架开发的现代化图书管理系统，采用C++20标准，使用JSON文件进行数据存储，实现了完整的图书借阅管理功能。

---

## 构建配置文件

### 📁 CMakeLists.txt
**作用**: CMake构建配置文件
- 定义项目基本信息和编译标准（C++20）
- 配置Qt6框架的依赖和路径
- 设置源文件目录和自动编译选项
- 配置Windows平台的Qt DLL复制
- 设置编译器警告级别

---

## 源代码目录结构

### 📁 src/ - 源代码根目录

#### 📄 main.cpp
**作用**: 程序入口文件
- 创建QApplication应用程序实例
- 初始化并显示主窗口
- 启动Qt事件循环

---

## 工具类模块 (utils/)

### 📁 src/utils/ - 业务逻辑和数据管理

#### 📄 book.h / book.h
**作用**: 图书数据模型定义
- 定义Book结构体，包含图书的基本信息
- 字段：索引号、书名、作者、出版社、馆藏地址、类别、价格、入库日期、借阅次数

#### 📄 bookcopy.h / bookcopy.cpp
**作用**: 图书副本数据模型
- 定义BookCopy结构体，管理图书的具体副本
- 字段：副本ID、图书索引号、副本编号、借阅者、借阅日期、归还日期
- 提供副本可用性判断方法

#### 📄 bookcopymanager.h / bookcopymanager.cpp
**作用**: 图书副本管理器
- 管理所有图书副本的增删改查操作
- 提供按索引号获取副本、按借阅者获取副本等功能
- 维护副本状态的一致性

#### 📄 bookdisplay.h / bookdisplay.cpp
**作用**: 图书显示和格式化工具
- 提供图书信息的格式化显示
- 处理图书列表的展示逻辑
- 支持不同显示模式的切换

#### 📄 databasemanager.h / databasemanager.cpp
**作用**: 数据库管理器（JSON文件操作）
- 负责所有JSON文件的读写操作
- 提供图书、用户、副本数据的持久化
- 处理文件异常和数据验证

#### 📄 librarymanager.h / librarymanager.cpp
**作用**: 图书管理核心业务逻辑
- 图书的增删改查操作
- 借书还书业务流程控制
- 搜索和筛选功能实现
- 数据统计和分析

#### 📄 log.h / log.cpp
**作用**: 日志记录系统
- 记录系统操作日志
- 提供不同级别的日志输出
- 支持文件和控制台日志输出

#### 📄 userrole.h
**作用**: 用户角色枚举定义
- 定义管理员和学生两种用户角色
- 提供角色权限控制的基础数据结构

---

## 用户界面模块 (widget/)

### 📁 src/widget/ - 界面相关文件

#### 📄 mainwindow.h / mainwindow.cpp
**作用**: 主窗口类
- 程序的主要界面实现
- 集成所有功能模块的UI展示
- 处理用户交互和界面响应
- 管理主题切换和布局调整

#### 📄 mainwindow.ui
**作用**: 主窗口界面设计文件
- 使用Qt Designer创建的UI布局
- 定义界面的控件结构和属性
- 可视化设计界面元素

#### 📄 ui_mainwindow.h / ui_mainwindow.cpp
**作用**: UI自动生成文件
- Qt根据.ui文件自动生成的界面代码
- 包含界面控件的声明和初始化
- 不应手动修改此文件

#### 📄 bookdetaildialog.h / bookdetaildialog.cpp
**作用**: 图书详情对话框
- 显示图书的详细信息
- 提供图书编辑功能（管理员模式）
- 支持图书信息的查看和修改

#### 📄 borrowdialog.h / borrowdialog.cpp
**作用**: 借书对话框
- 提供借书操作的交互界面
- 显示可借副本供用户选择
- 设置归还日期和确认借书操作

#### 📄 copymanagementdialog.h / copymanagementdialog.cpp
**作用**: 副本管理对话框
- 管理图书副本的增删改
- 显示副本的借阅状态
- 批量操作副本数据

---

## 资源文件 (resource/)

### 📁 src/resource/ - 资源和数据文件

#### 📄 library_data.json
**作用**: 图书数据存储文件
- 存储所有图书的基本信息
- JSON格式的结构化数据
- 包含图书的各种属性字段

#### 📄 book_copies.json
**作用**: 图书副本数据存储文件
- 存储所有图书副本的详细信息
- 记录副本的借阅状态和历史
- 维护副本与图书的关联关系

#### 📄 users.json
**作用**: 用户数据存储文件
- 存储系统用户的基本信息
- 包含用户名、密码、权限等字段
- 支持管理员和普通用户角色

#### 📄 library.svg
**作用**: 图书图标文件
- 系统界面使用的SVG格式图标
- 矢量图形，支持无损缩放
- 用于界面美化和视觉识别

#### 📄 res.qrc
**作用**: Qt资源文件配置
- 定义项目中所有资源文件的路径
- 将资源文件编译到可执行文件中
- 支持图标、图片、样式表等资源

---

## 构建输出目录

### 📁 build/ - CMake构建输出目录
**作用**: 存储CMake生成的构建文件
- CMake配置文件和Makefile
- 编译生成的目标文件和可执行文件
- Qt自动生成的MOC、RCC、UIC文件

### 📁 cmake-build-debug/ - 调试版本构建目录
**作用**: 调试版本的构建输出
- 包含调试信息的可执行文件
- 调试版本的依赖库文件
- 开发阶段的测试和调试文件

---

## 文档文件

### 📄 功能实现说明.md
**作用**: 详细的功能实现文档
- 完整描述系统的功能模块
- 详细说明各个功能的实现逻辑
- 包含核心代码示例和设计思路

### 📄 test_search.md
**作用**: 搜索功能测试文档
- 搜索功能的测试用例
- 测试结果的记录和分析
- 功能验证和性能测试

### 📄 debug_search.md
**作用**: 搜索功能调试文档
- 搜索功能的调试过程记录
- 问题分析和解决方案
- 优化建议和改进方案

### 📄 续借功能测试计划.md
**作用**: 续借功能的测试计划
- 续借功能的测试策略
- 测试场景和预期结果
- 功能验证和验收标准

---

## 开发工具配置

### 📄 .idea/ - CLion IDE配置目录
**作用**: CLion集成开发环境的项目配置
- 项目设置和编译器配置
- 代码风格和模板设置
- 版本控制和调试配置

---

## 文件组织特点

1. **模块化设计**: 按功能将代码组织为不同的模块（utils、widget、resource）
2. **MVC架构**: 界面（widget）和业务逻辑（utils）分离
3. **资源集成**: 使用Qt资源系统集中管理界面资源
4. **数据持久化**: 采用JSON文件格式存储数据
5. **跨平台**: 使用CMake构建系统，支持Windows/Linux/macOS

## 开发和维护建议

1. **新增功能**: 在相应的模块下添加新的类文件
2. **界面修改**: 优先修改.ui文件，然后在.cpp文件中添加逻辑
3. **数据结构变更**: 注意同步修改JSON数据文件结构
4. **依赖管理**: 新增第三方库时更新CMakeLists.txt配置

---

*该文档生成时间: 2025年11月21日*
*项目状态: 开发完成，功能测试中*